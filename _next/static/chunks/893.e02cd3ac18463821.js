"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[893],{49725:function(e,t,a){var r,s,n,o,i=this&&this.__classPrivateFieldSet||function(e,t,a,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,a):s?s.value=a:t.set(e,a),a},d=this&&this.__classPrivateFieldGet||function(e,t,a,r){if("a"===a&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?r:"a"===a?r.call(e):r?r.value:t.get(e)},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const l=a(833),f=a(20389),u=c(a(36605)),h=c(a(99278)),w=c(a(37216)),g=a(30462),p=a(30341),y=c(a(12282)),v=a(14510);class S{constructor(){r.set(this,void 0),s.set(this,void 0),n.set(this,void 0),o.set(this,void 0)}static async create({ethAdapter:e,safeAddress:t,isL1SafeMasterCopy:a,contractNetworks:r}){const s=new S;return await s.init({ethAdapter:e,safeAddress:t,isL1SafeMasterCopy:a,contractNetworks:r}),s}async init({ethAdapter:e,safeAddress:t,isL1SafeMasterCopy:a,contractNetworks:c}){i(this,r,e,"f"),i(this,s,await u.default.create({ethAdapter:d(this,r,"f"),safeAddress:t,isL1SafeMasterCopy:a,contractNetworks:c}),"f"),i(this,n,new w.default(d(this,r,"f"),d(this,s,"f").safeContract),"f"),i(this,o,new h.default(d(this,r,"f"),d(this,s,"f").safeContract),"f")}async connect({ethAdapter:e,safeAddress:t,isL1SafeMasterCopy:a,contractNetworks:n}){return await S.create({ethAdapter:e||d(this,r,"f"),safeAddress:t||this.getAddress(),isL1SafeMasterCopy:a||d(this,s,"f").isL1SafeMasterCopy,contractNetworks:n||d(this,s,"f").contractNetworks})}getAddress(){return d(this,s,"f").safeContract.getAddress()}getContractManager(){return d(this,s,"f")}getEthAdapter(){return d(this,r,"f")}getMultiSendAddress(){return d(this,s,"f").multiSendContract.getAddress()}async getContractVersion(){return d(this,s,"f").safeContract.getVersion()}async getOwners(){return d(this,n,"f").getOwners()}async getNonce(){return d(this,s,"f").safeContract.getNonce()}async getThreshold(){return d(this,n,"f").getThreshold()}async getChainId(){return d(this,r,"f").getChainId()}async getBalance(){return d(this,r,"f").getBalance(this.getAddress())}async getModules(){return d(this,o,"f").getModules()}async isModuleEnabled(e){return d(this,o,"f").isModuleEnabled(e)}async isOwner(e){return d(this,n,"f").isOwner(e)}async createTransaction(e,t){if((0,g.isMetaTransactionArray)(e)&&0===e.length)throw new Error("Invalid empty array of transactions");let a;if((0,g.isMetaTransactionArray)(e)&&e.length>1){const r=(0,v.encodeMultiSendData)(e.map(v.standardizeMetaTransactionData));a={...t,to:d(this,s,"f").multiSendContract.getAddress(),value:"0",data:d(this,s,"f").multiSendContract.encode("multiSend",[r]),operation:f.OperationType.DelegateCall}}else a=(0,g.isMetaTransactionArray)(e)?{...t,...e[0]}:e;const n=await(0,v.standardizeSafeTransactionData)(d(this,s,"f").safeContract,d(this,r,"f"),a);return new y.default(n)}async createRejectionTransaction(e){return this.createTransaction({to:this.getAddress(),nonce:e,value:"0",data:"0x",safeTxGas:0})}async getTransactionHash(e){const t=e.data;return await d(this,s,"f").safeContract.getTransactionHash(t)}async signTransactionHash(e){const t=await this.getOwners(),a=await d(this,r,"f").getSignerAddress();if(!t.find((e=>a&&(0,g.sameString)(e,a))))throw new Error("Transactions can only be signed by Safe owners");return(0,p.generateSignature)(d(this,r,"f"),e)}async signTransaction(e){const t=await this.getTransactionHash(e),a=await this.signTransactionHash(t);e.addSignature(a)}async approveTransactionHash(e,t){const a=await this.getOwners(),n=await d(this,r,"f").getSignerAddress();if(!a.find((e=>n&&(0,g.sameString)(e,n))))throw new Error("Transaction hashes can only be approved by Safe owners");if((null===t||void 0===t?void 0:t.gas)&&(null===t||void 0===t?void 0:t.gasLimit))throw new Error("Cannot specify gas and gasLimit together in transaction options");return d(this,s,"f").safeContract.approveHash(e,{from:n,...t})}async getOwnersWhoApprovedTx(e){const t=await this.getOwners();let a=[];for(const r of t){(await d(this,s,"f").safeContract.approvedHashes(r,e)).gt(0)&&a.push(r)}return a}async getEnableModuleTx(e,t){return await this.createTransaction({to:this.getAddress(),value:"0",data:await d(this,o,"f").encodeEnableModuleData(e),...t})}async getDisableModuleTx(e,t){return await this.createTransaction({to:this.getAddress(),value:"0",data:await d(this,o,"f").encodeDisableModuleData(e),...t})}async getAddOwnerTx({ownerAddress:e,threshold:t},a){return await this.createTransaction({to:this.getAddress(),value:"0",data:await d(this,n,"f").encodeAddOwnerWithThresholdData(e,t),...a})}async getRemoveOwnerTx({ownerAddress:e,threshold:t},a){return await this.createTransaction({to:this.getAddress(),value:"0",data:await d(this,n,"f").encodeRemoveOwnerData(e,t),...a})}async getSwapOwnerTx({oldOwnerAddress:e,newOwnerAddress:t},a){return await this.createTransaction({to:this.getAddress(),value:"0",data:await d(this,n,"f").encodeSwapOwnerData(e,t),...a})}async getChangeThresholdTx(e,t){return await this.createTransaction({to:this.getAddress(),value:"0",data:await d(this,n,"f").encodeChangeThresholdData(e),...t})}async executeTransaction(e,t){const a=await this.getTransactionHash(e),n=await this.getOwnersWhoApprovedTx(a);for(const r of n)e.addSignature((0,p.generatePreValidatedSignature)(r));const o=await this.getOwners(),i=await d(this,r,"f").getSignerAddress();o.includes(i)&&e.addSignature((0,p.generatePreValidatedSignature)(i));const c=await this.getThreshold();if(c>e.signatures.size){const t=c-e.signatures.size;throw new Error(`There ${t>1?"are":"is"} ${t} signature${t>1?"s":""} missing`)}const f=l.BigNumber.from(e.data.value);if(!f.isZero()){const e=await this.getBalance();if(f.gt(l.BigNumber.from(e)))throw new Error("Not enough Ether funds")}if((null===t||void 0===t?void 0:t.gas)&&(null===t||void 0===t?void 0:t.gasLimit))throw new Error("Cannot specify gas and gasLimit together in transaction options");return await d(this,s,"f").safeContract.execTransaction(e,{from:i,...t})}}r=new WeakMap,s=new WeakMap,n=new WeakMap,o=new WeakMap,t.default=S},95988:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.safeDeploymentsL1ChainIds=t.safeDeploymentsVersions=t.SAFE_BASE_VERSION=t.SAFE_LAST_VERSION=void 0,t.SAFE_LAST_VERSION="1.3.0",t.SAFE_BASE_VERSION="1.1.1",t.safeDeploymentsVersions={"1.3.0":{safeMasterCopyVersion:"1.3.0",safeMasterCopyL2Version:"1.3.0",safeProxyFactoryVersion:"1.3.0",multiSendVersion:"1.3.0"},"1.2.0":{safeMasterCopyVersion:"1.2.0",safeMasterCopyL2Version:void 0,safeProxyFactoryVersion:"1.1.1",multiSendVersion:"1.1.1"},"1.1.1":{safeMasterCopyVersion:"1.1.1",safeMasterCopyL2Version:void 0,safeProxyFactoryVersion:"1.1.1",multiSendVersion:"1.1.1"}},t.safeDeploymentsL1ChainIds=[1]},7631:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.getMultiSendContract=t.getProxyFactoryContract=t.getSafeContract=t.getSafeProxyFactoryContractDeployment=t.getMultiSendContractDeployment=t.getSafeContractDeployment=void 0;const r=a(79362),s=a(95988);function n(e,t,a=!1){const n={version:s.safeDeploymentsVersions[e].safeMasterCopyVersion,network:t.toString(),released:!0};return s.safeDeploymentsL1ChainIds.includes(t)||a?(0,r.getSafeSingletonDeployment)(n):(0,r.getSafeL2SingletonDeployment)(n)}function o(e,t){const a=s.safeDeploymentsVersions[e].multiSendVersion;return(0,r.getMultiSendDeployment)({version:a,network:t.toString(),released:!0})}function i(e,t){const a=s.safeDeploymentsVersions[e].safeProxyFactoryVersion;return(0,r.getProxyFactoryDeployment)({version:a,network:t.toString(),released:!0})}t.getSafeContractDeployment=n,t.getMultiSendContractDeployment=o,t.getSafeProxyFactoryContractDeployment=i,t.getSafeContract=async function({ethAdapter:e,safeVersion:t,chainId:a,customSafeAddress:r,isL1SafeMasterCopy:s,customContracts:o}){const i=n(t,a,s),d=e.getSafeContract({safeVersion:t,chainId:a,singletonDeployment:i,customContractAddress:null!==r&&void 0!==r?r:null===o||void 0===o?void 0:o.safeMasterCopyAddress,customContractAbi:null===o||void 0===o?void 0:o.safeMasterCopyAbi});if(!(await e.isContractDeployed(d.getAddress())))throw new Error("Safe Proxy contract is not deployed on the current network");return d},t.getProxyFactoryContract=async function({ethAdapter:e,safeVersion:t,chainId:a,customContracts:r}){const s=i(t,a),n=await e.getSafeProxyFactoryContract({safeVersion:t,chainId:a,singletonDeployment:s,customContractAddress:null===r||void 0===r?void 0:r.safeProxyFactoryAddress,customContractAbi:null===r||void 0===r?void 0:r.safeProxyFactoryAbi});if(!(await e.isContractDeployed(n.getAddress())))throw new Error("Safe Proxy Factory contract is not deployed on the current network");return n},t.getMultiSendContract=async function({ethAdapter:e,safeVersion:t,chainId:a,customContracts:r}){const s=o(t,a),n=await e.getMultiSendContract({safeVersion:t,chainId:a,singletonDeployment:s,customContractAddress:null===r||void 0===r?void 0:r.multiSendAddress,customContractAbi:null===r||void 0===r?void 0:r.multiSendAbi});if(!(await e.isContractDeployed(n.getAddress())))throw new Error("Multi Send contract is not deployed on the current network");return n}},3893:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.standardizeSafeTransactionData=t.EthSignSignature=t.SafeFactory=t.ContractManager=void 0;const s=r(a(36605));t.ContractManager=s.default;const n=r(a(49725)),o=r(a(31178));t.SafeFactory=o.default;const i=r(a(58654));t.EthSignSignature=i.default;const d=a(14510);Object.defineProperty(t,"standardizeSafeTransactionData",{enumerable:!0,get:function(){return d.standardizeSafeTransactionData}}),t.default=n.default},36605:function(e,t,a){var r,s,n,o,i=this&&this.__classPrivateFieldSet||function(e,t,a,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,a):s?s.value=a:t.set(e,a),a},d=this&&this.__classPrivateFieldGet||function(e,t,a,r){if("a"===a&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?r:"a"===a?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const c=a(95988),l=a(7631);class f{constructor(){r.set(this,void 0),s.set(this,void 0),n.set(this,void 0),o.set(this,void 0)}static async create({ethAdapter:e,safeAddress:t,isL1SafeMasterCopy:a,contractNetworks:r}){const s=new f;return await s.init({ethAdapter:e,safeAddress:t,isL1SafeMasterCopy:a,contractNetworks:r}),s}async init({ethAdapter:e,safeAddress:t,isL1SafeMasterCopy:a,contractNetworks:d}){const f=await e.getChainId(),u=null===d||void 0===d?void 0:d[f];i(this,r,d,"f"),i(this,s,a,"f");const h=await(0,l.getSafeContract)({ethAdapter:e,safeVersion:c.SAFE_LAST_VERSION,chainId:f,isL1SafeMasterCopy:a,customSafeAddress:t,customContracts:u}),w=await h.getVersion();i(this,n,await(0,l.getSafeContract)({ethAdapter:e,safeVersion:w,chainId:f,isL1SafeMasterCopy:a,customSafeAddress:t,customContracts:u}),"f"),i(this,o,await(0,l.getMultiSendContract)({ethAdapter:e,safeVersion:w,chainId:f,customContracts:u}),"f")}get contractNetworks(){return d(this,r,"f")}get isL1SafeMasterCopy(){return d(this,s,"f")}get safeContract(){return d(this,n,"f")}get multiSendContract(){return d(this,o,"f")}}r=new WeakMap,s=new WeakMap,n=new WeakMap,o=new WeakMap,t.default=f},99278:function(e,t,a){var r,s,n=this&&this.__classPrivateFieldSet||function(e,t,a,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,a):s?s.value=a:t.set(e,a),a},o=this&&this.__classPrivateFieldGet||function(e,t,a,r){if("a"===a&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?r:"a"===a?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30462),d=a(539);r=new WeakMap,s=new WeakMap,t.default=class{constructor(e,t){r.set(this,void 0),s.set(this,void 0),n(this,r,e,"f"),n(this,s,t,"f")}validateModuleAddress(e){if(!o(this,r,"f").isAddress(e)||(0,i.isRestrictedAddress)(e))throw new Error("Invalid module address provided")}validateModuleIsNotEnabled(e,t){if(t.findIndex((t=>(0,i.sameString)(t,e)))>=0)throw new Error("Module provided is already enabled")}validateModuleIsEnabled(e,t){const a=t.findIndex((t=>(0,i.sameString)(t,e)));if(!(a>=0))throw new Error("Module provided is not enabled already");return a}async getModules(){return o(this,s,"f").getModules()}async isModuleEnabled(e){return o(this,s,"f").isModuleEnabled(e)}async encodeEnableModuleData(e){this.validateModuleAddress(e);const t=await this.getModules();return this.validateModuleIsNotEnabled(e,t),o(this,s,"f").encode("enableModule",[e])}async encodeDisableModuleData(e){this.validateModuleAddress(e);const t=await this.getModules(),a=this.validateModuleIsEnabled(e,t),r=0===a?d.SENTINEL_ADDRESS:t[a-1];return o(this,s,"f").encode("disableModule",[r,e])}}},37216:function(e,t,a){var r,s,n=this&&this.__classPrivateFieldSet||function(e,t,a,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,a):s?s.value=a:t.set(e,a),a},o=this&&this.__classPrivateFieldGet||function(e,t,a,r){if("a"===a&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?r:"a"===a?r.call(e):r?r.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const i=a(30462),d=a(539);r=new WeakMap,s=new WeakMap,t.default=class{constructor(e,t){r.set(this,void 0),s.set(this,void 0),n(this,r,e,"f"),n(this,s,t,"f")}validateOwnerAddress(e,t){if(!o(this,r,"f").isAddress(e)||(0,i.isRestrictedAddress)(e))throw new Error(t||"Invalid owner address provided")}validateThreshold(e,t){if(e<=0)throw new Error("Threshold needs to be greater than 0");if(e>t)throw new Error("Threshold cannot exceed owner count")}validateAddressIsNotOwner(e,t,a){if(t.findIndex((t=>(0,i.sameString)(t,e)))>=0)throw new Error(a||"Address provided is already an owner")}validateAddressIsOwner(e,t,a){const r=t.findIndex((t=>(0,i.sameString)(t,e)));if(!(r>=0))throw new Error(a||"Address provided is not an owner");return r}async getOwners(){return[...await o(this,s,"f").getOwners()]}async getThreshold(){return o(this,s,"f").getThreshold()}async isOwner(e){return o(this,s,"f").isOwner(e)}async encodeAddOwnerWithThresholdData(e,t){this.validateOwnerAddress(e);const a=await this.getOwners();this.validateAddressIsNotOwner(e,a);const r=null!==t&&void 0!==t?t:await this.getThreshold();return this.validateThreshold(r,a.length+1),o(this,s,"f").encode("addOwnerWithThreshold",[e,r])}async encodeRemoveOwnerData(e,t){this.validateOwnerAddress(e);const a=await this.getOwners(),r=this.validateAddressIsOwner(e,a),n=null!==t&&void 0!==t?t:await this.getThreshold()-1;this.validateThreshold(n,a.length-1);const i=0===r?d.SENTINEL_ADDRESS:a[r-1];return o(this,s,"f").encode("removeOwner",[i,e,n])}async encodeSwapOwnerData(e,t){this.validateOwnerAddress(t,"Invalid new owner address provided"),this.validateOwnerAddress(e,"Invalid old owner address provided");const a=await this.getOwners();this.validateAddressIsNotOwner(t,a,"New address provided is already an owner");const r=this.validateAddressIsOwner(e,a,"Old address provided is not an owner"),n=0===r?d.SENTINEL_ADDRESS:a[r-1];return o(this,s,"f").encode("swapOwner",[n,e,t])}async encodeChangeThresholdData(e){const t=await this.getOwners();return this.validateThreshold(e,t.length),o(this,s,"f").encode("changeThreshold",[e])}}},31178:function(e,t,a){var r,s,n,o,i,d,c=this&&this.__classPrivateFieldSet||function(e,t,a,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,a):s?s.value=a:t.set(e,a),a},l=this&&this.__classPrivateFieldGet||function(e,t,a,r){if("a"===a&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?r:"a"===a?r.call(e):r?r.value:t.get(e)},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=a(95988),h=a(7631),w=f(a(49725)),g=a(539),p=a(78677);class y{constructor(){r.set(this,void 0),s.set(this,void 0),n.set(this,void 0),o.set(this,void 0),i.set(this,void 0),d.set(this,void 0)}static async create({ethAdapter:e,safeVersion:t=u.SAFE_LAST_VERSION,isL1SafeMasterCopy:a=!1,contractNetworks:r}){const s=new y;return await s.init({ethAdapter:e,safeVersion:t,isL1SafeMasterCopy:a,contractNetworks:r}),s}async init({ethAdapter:e,safeVersion:t,isL1SafeMasterCopy:a,contractNetworks:f}){c(this,o,e,"f"),c(this,n,t,"f"),c(this,s,a,"f"),c(this,r,f,"f");const u=await l(this,o,"f").getChainId(),w=null===f||void 0===f?void 0:f[u];c(this,i,await(0,h.getProxyFactoryContract)({ethAdapter:e,safeVersion:t,chainId:u,customContracts:w}),"f"),c(this,d,await(0,h.getSafeContract)({ethAdapter:e,safeVersion:t,chainId:u,isL1SafeMasterCopy:a,customContracts:w}),"f")}getEthAdapter(){return l(this,o,"f")}getSafeVersion(){return l(this,n,"f")}getAddress(){return l(this,i,"f").getAddress()}async getChainId(){return l(this,o,"f").getChainId()}async encodeSetupCallData({owners:e,threshold:t,to:a=g.ZERO_ADDRESS,data:r=g.EMPTY_DATA,fallbackHandler:s=g.ZERO_ADDRESS,paymentToken:n=g.ZERO_ADDRESS,payment:o=0,paymentReceiver:i=g.ZERO_ADDRESS}){return l(this,d,"f").encode("setup",[e,t,a,r,s,n,o,i])}async deploySafe({safeAccountConfig:e,safeDeploymentConfig:t,options:a,callback:n}){var c;(0,p.validateSafeAccountConfig)(e);const f=await l(this,o,"f").getSignerAddress(),u=await this.encodeSetupCallData(e),h=null!==(c=null===t||void 0===t?void 0:t.saltNonce)&&void 0!==c?c:1e3*Date.now()+Math.floor(1e3*Math.random());if((null===a||void 0===a?void 0:a.gas)&&(null===a||void 0===a?void 0:a.gasLimit))throw new Error("Cannot specify gas and gasLimit together in transaction options");const g=await l(this,i,"f").createProxy({safeMasterCopyAddress:l(this,d,"f").getAddress(),initializer:u,saltNonce:h,options:{from:f,...a},callback:n});if(!(await l(this,o,"f").isContractDeployed(g)))throw new Error("Safe Proxy contract is not deployed on the current network");return await w.default.create({ethAdapter:l(this,o,"f"),safeAddress:g,isL1SafeMasterCopy:l(this,s,"f"),contractNetworks:l(this,r,"f")})}}r=new WeakMap,s=new WeakMap,n=new WeakMap,o=new WeakMap,i=new WeakMap,d=new WeakMap,t.default=y},78677:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateSafeAccountConfig=void 0;t.validateSafeAccountConfig=({owners:e,threshold:t})=>{if(e.length<=0)throw new Error("Owner list must have at least one owner");if(t<=0)throw new Error("Threshold must be greater than or equal to 1");if(t>e.length)throw new Error("Threshold must be lower than or equal to owners length")}},539:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.SENTINEL_ADDRESS=t.EMPTY_DATA=t.ZERO_ADDRESS=void 0,t.ZERO_ADDRESS=`0x${"0".repeat(40)}`,t.EMPTY_DATA="0x",t.SENTINEL_ADDRESS="0x0000000000000000000000000000000000000001"},30462:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.isMetaTransactionArray=t.isRestrictedAddress=t.sameString=void 0;const r=a(539);t.sameString=function(e,t){return e.toLowerCase()===t.toLowerCase()},t.isRestrictedAddress=function(e){return function(e){return e===r.ZERO_ADDRESS}(e)||function(e){return e===r.SENTINEL_ADDRESS}(e)},t.isMetaTransactionArray=function(e){return void 0!==(null===e||void 0===e?void 0:e.length)}},21566:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hasFeature=t.enabledFeatures=t.FEATURES=void 0;const s=r(a(45712));var n;!function(e){e[e.SAFE_TX_GAS_OPTIONAL=0]="SAFE_TX_GAS_OPTIONAL"}(n=t.FEATURES||(t.FEATURES={}));const o={[n.SAFE_TX_GAS_OPTIONAL]:">=1.3.0"};t.enabledFeatures=e=>Object.values(n).filter((t=>((e,t)=>!(e in o)||(0,s.default)(t,o[e]))(t,e)));t.hasFeature=(e,a)=>(0,t.enabledFeatures)(a).includes(e)},58654:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.signer=e,this.data=t}staticPart(){return this.data}dynamicPart(){return""}}},30341:function(e,t,a){var r=a(48764).Buffer,s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.generateSignature=t.adjustVInSignature=t.isTxHashSignedWithPrefix=t.generatePreValidatedSignature=void 0;const n=a(22751),o=a(30462),i=s(a(58654));function d(e,t,a){let s;try{const i={r:r.from(t.slice(2,66),"hex"),s:r.from(t.slice(66,130),"hex"),v:parseInt(t.slice(130,132),16)},d=(0,n.ecrecover)(r.from(e.slice(2),"hex"),i.v,i.r,i.s),c=(0,n.bufferToHex)((0,n.pubToAddress)(d));s=!(0,o.sameString)(c,a)}catch(i){s=!0}return s}function c(e,t){let a=parseInt(e.slice(-2),16);if(![0,1,27,28].includes(a))throw new Error("Invalid signature");return a<27&&(a+=27),t&&(a+=4),e=e.slice(0,-2)+a.toString(16)}t.generatePreValidatedSignature=function(e){const t="0x000000000000000000000000"+e.slice(2)+"000000000000000000000000000000000000000000000000000000000000000001";return new i.default(e,t)},t.isTxHashSignedWithPrefix=d,t.adjustVInSignature=c,t.generateSignature=async function(e,t){const a=await e.getSignerAddress();let r=await e.signMessage(t);return r=c(r,d(t,r,a)),new i.default(a,r)}},12282:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.signatures=new Map,this.data=e}addSignature(e){this.signatures.set(e.signer.toLowerCase(),e)}encodedSignatures(){const e=Array.from(this.signatures.keys()).sort();e.length;let t="",a="";return e.forEach((e=>{const r=this.signatures.get(e);t+=null===r||void 0===r?void 0:r.staticPart().slice(2),a+=null===r||void 0===r?void 0:r.dynamicPart()})),"0x"+t+a}}},30730:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.estimateTxGas=void 0;const r=a(833),s=a(20389);t.estimateTxGas=async function(e,t,a,n,o,i){let d=0;const c=e.getAddress(),l=e.encode("requiredTxGas",[a,n,o,i]);try{const e=(await t.estimateGas({to:c,from:c,data:l})).toString();d=r.BigNumber.from("0x"+e.substring(138)).toNumber()+1e4}catch(f){}if(d>0){const e=function(e){return e.match(/.{2}/g).reduce(((e,t)=>"0x"===t?e+0:"00"===t?e+4:e+16),0)}(l);let a=1e4;for(let r=0;r<10;r++){try{if("0x"!==await t.call({to:c,from:c,data:l,gasPrice:0,gasLimit:d+e+a}))break}catch(f){}d+=a,a*=2}return d+a}try{return await t.estimateGas({to:a,from:c,value:n,data:o})}catch(f){return i===s.OperationType.DelegateCall?0:Promise.reject(f)}}},14510:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.encodeMultiSendData=t.standardizeSafeTransactionData=t.standardizeMetaTransactionData=void 0;const r=a(16441),s=a(31886),n=a(20389),o=a(539),i=a(21566),d=a(30730);t.standardizeMetaTransactionData=function(e){var t;return{...e,operation:null!==(t=e.operation)&&void 0!==t?t:n.OperationType.Call}},t.standardizeSafeTransactionData=async function(e,t,a){var r,s,c,l,f;const u={to:a.to,value:a.value,data:a.data,operation:null!==(r=a.operation)&&void 0!==r?r:n.OperationType.Call,baseGas:null!==(s=a.baseGas)&&void 0!==s?s:0,gasPrice:null!==(c=a.gasPrice)&&void 0!==c?c:0,gasToken:a.gasToken||o.ZERO_ADDRESS,refundReceiver:a.refundReceiver||o.ZERO_ADDRESS,nonce:null!==(l=a.nonce)&&void 0!==l?l:await e.getNonce()};let h;const w=await e.getVersion();return h=(0,i.hasFeature)(i.FEATURES.SAFE_TX_GAS_OPTIONAL,w)&&0===u.gasPrice?0:null!==(f=a.safeTxGas)&&void 0!==f?f:await(0,d.estimateTxGas)(e,t,u.to,u.value,u.data,u.operation),{...u,safeTxGas:h}},t.encodeMultiSendData=function(e){return"0x"+e.map((e=>function(e){const t=(0,r.arrayify)(e.data);return(0,s.pack)(["uint8","address","uint256","uint256","bytes"],[e.operation,e.to,e.value,t.length,t]).slice(2)}(e))).join("")}}}]);